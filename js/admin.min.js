!function(B){"use strict";var c=!1;function p(e){e.classList.toggle("inactive"),-1<e.className.indexOf("inactive")?e.firstElementChild.value="inactive":e.firstElementChild.value="active"}function h(e){e.parentNode.nextElementSibling.classList.toggle("hidden"),e.parentNode.nextElementSibling.classList.contains("hidden")?(e.parentNode.firstElementChild.innerHTML=""!==e.parentNode.nextElementSibling.firstElementChild.value.trim()?e.parentNode.nextElementSibling.firstElementChild.value:"Header",e.classList.remove("dashicons-arrow-up"),e.classList.add("dashicons-arrow-down")):(e.parentNode.firstElementChild.innerHTML="Header",e.classList.remove("dashicons-arrow-down"),e.classList.add("dashicons-arrow-up"))}function v(e){1==confirm("Are you sure you want to remove this alert? This can not be undone.")&&(c=!0,e.parentNode.parentNode.parentNode.remove())}function O(e){e.parentNode.parentNode.nextSibling.classList.toggle("hidden")}B(window).on("beforeunload",function(){if(c&&"nav-menus.php"!==args.changeCheck)return"Are you sure you want to leave?"}),B('textarea, #ca_default_navigation_menu, select, input[type="text"], input[type="checkbox"], input[type="password"] ').change(function(e){c=!0}),B('input[type="button"]').click(function(e){c=!0}),B("#caweb-options-form").submit(function(){c=!1,this.submit()}),B(".caweb-nav-tab").click(function(){for(var e=document.getElementsByClassName("caweb-nav-tab"),t=this.getAttribute("name"),n=0;n<e.length;n++)t!==e[n].getAttribute("name")?(e[n].classList.remove("nav-tab-active"),document.getElementById(e[n].getAttribute("name")).classList.add("hidden")):(e[n].classList.add("nav-tab-active"),document.getElementById(t).classList.remove("hidden"));document.getElementById("tab_selected").value=t}),B("#ca_site_version").change(function(){for(var e=this.options[this.selectedIndex].value,t=document.getElementsByClassName("extra"),n=document.getElementsByClassName("base"),a=B("#general table:first tr:nth-child(6)"),i=B("#ca_site_color_scheme")[0],d=i.options[i.selectedIndex].value,l=!1,s=0;s<t.length;s++)if(5<=e){t[s].classList.remove("hidden");for(var c=0;c<n.length;c++)n[c].classList.add("hidden");B("#ca_google_search_id").val().trim()?a.removeClass("hidden"):a.addClass("hidden")}else{t[s].classList.add("hidden"),t[s].value==d&&t[s].classList.contains("extra")&&(l=!0);for(c=0;c<n.length;c++)n[c].classList.remove("hidden")}if(l)for(s=0;s<i.options.length;s++)if(!i.options[s].classList.contains("extra")){i.selectedIndex=s;break}}),B("#resetFavIcon").click(function(){var e=args.defaultFavIcon;document.getElementById("ca_fav_ico").value=e,document.getElementById("ca_fav_ico_img").src=e,document.getElementById("ca_fav_ico_filename").value="favicon.ico"}),B("#ca_google_search_id").on("input",function(e){var t=B("#general table:first tr:nth-child(6)"),n=B("#ca_site_version option:selected").val();this.value.trim()?5<=n&&t.removeClass("hidden"):t.addClass("hidden")}),B("#ca_x_ua_compatibility").on("input",function(e){var t=this.checked,n=B(this).next();t?n.html("IE 11 browser compatibility enabled. Warning: creates accessibility errors when using IE browsers."):n.html("")}),B("#uploadedCSS, #uploadedJS").sortable(),B("#uploadedCSS, #uploadedJS").disableSelection(),B(".remove-css, .remove-js").click(function(e){e.preventDefault(),1==confirm("Are you sure you want to "+this.title+"? This can not be undone.")&&(c=!0,this.parentNode.remove())}),B("#addCSS, #addJS").click(function(e){!function(e,n){var t=e.children().children().length,a=document.createElement("TR"),i=document.createElement("TD"),d=document.createElement("A"),l=document.createElement("TD"),s=document.createElement("Input");a.classList="pending-"+n,d.classList="dashicons dashicons-dismiss remove-"+n,s.type="file",s.name=t+n+"_upload",s.id=t+n+"_upload",s.accept="."+n,d.addEventListener("click",function(e){e.preventDefault(),1==(""===this.title||confirm("Are you sure you want to "+this.title+"? This can not be undone."))&&(c=!0,this.parentNode.parentNode.remove())}),s.addEventListener("change",function(){var e=this.value.substring(this.value.lastIndexOf("\\")+1),t=0<e.lastIndexOf(".")?e.substring(e.lastIndexOf(".")+1).toLowerCase():"";""===t||n!==t?(alert(e+" isn't a valid "+n+" extension and was not uploaded."),this.parentNode.remove()):d.title="remove "+e}),l.append(d),l.append(s),a.append(i),a.append(l),e.append(a)}(B(this).closest("table"),B(this).attr("name")),c=!0}),B("#cawebAlerts").sortable(),B("#cawebAlerts").disableSelection(),B("#addAlertBanner").click(function(e){B("#caweb_alert_count").val(function(e,t){return++t});var t=B("#cawebAlerts"),n=document.createElement("LI"),a=B("#caweb_alert_count").val(),i=document.createElement("DIV"),d=B("#caweb-alert-settings"),l=document.createElement("DIV");i.classList="caweb-alert",function(e,t){var n=document.createElement("DIV"),a=document.createElement("P"),i=document.createElement("A"),d=document.createElement("A"),l=document.createElement("A"),s=document.createElement("A"),c=document.createElement("INPUT"),o=document.createElement("DIV"),r=document.createElement("INPUT"),m=document.createElement("P"),u=document.createElement("TEXTAREA");a.innerHTML="Label",i.classList="thickbox dashicons dashicons-menu",i.href="#TB_inline?width=600&height=550&modal=true&inlineId=caweb-alert-"+t,d.classList="dashicons dashicons-dismiss removeAlert",d.addEventListener("click",function(e){v(this)}),l.classList="dashicons dashicons-arrow-up alert-toggle",l.addEventListener("click",function(e){h(this)}),s.classList="dashicons activateAlert",s.addEventListener("click",function(e){p(this)}),c.name="alert-status-"+t,c.type="hidden",s.appendChild(c),o.appendChild(r),o.appendChild(m),o.appendChild(u),r.name="alert-header-"+t,r.type="text",r.placeholder="Label",m.innerHTML="Message",u.name="alert-message-"+t,u.id="alertmessage"+t,n.appendChild(a),n.appendChild(d),n.appendChild(i),n.appendChild(l),n.appendChild(s),e.appendChild(n),e.appendChild(o)}(i,a),l.id="caweb-alert-"+a,l.style.display="none",function(e,t){var n=document.createElement("FORM"),a=document.createElement("H3"),i=document.createElement("P"),d=document.createElement("LABEL"),l=document.createElement("INPUT"),s=document.createElement("LABEL"),c=document.createElement("INPUT"),o=document.createElement("P"),r=B("#ca_site_color_scheme")[0],m=r.options[r.selectedIndex].value,u=document.createElement("INPUT"),p=document.createElement("P"),h=document.createElement("LABEL"),v=document.createElement("INPUT"),g=document.createElement("DIV"),f=document.createElement("P"),E=document.createElement("INPUT"),b=document.createElement("LABEL"),L=document.createElement("LABEL"),N=document.createElement("LABEL"),C=document.createElement("INPUT"),x=document.createElement("INPUT"),_=document.createElement("P"),y=document.createElement("SPAN"),w=document.createElement("UL"),I=document.createElement("INPUT"),k=document.createElement("A"),T=document.createElement("A");n.classList="caweb-alert-"+t,a.innerHTML="Alert Settings",i.innerHTML="Display on",l.type="radio",l.name="alert-display-"+t,l.value="home",l.checked=!0,d.appendChild(l),d.appendChild(document.createTextNode("Home Page Only")),c.type="radio",c.name="alert-display-"+t,c.value="all",s.appendChild(c),s.appendChild(document.createTextNode("All Pages")),o.innerHTML="Banner Color",u.type="color",u.name="alert-banner-color-"+t,u.value=args.caweb_colors[m].highlight,h.innerHTML="Add Read More Button ",v.type="checkbox",v.classList="alert-read-more",v.name="alert-read-more-"+t,v.addEventListener("click",function(e){O(this)}),h.appendChild(v),p.appendChild(h),f.innerHTML="Read More Button URL",E.type="text",E.name="alert-read-more-url-"+t,b.innerHTML="Open link in",C.type="radio",C.name="alert-read-more-target-"+t,C.checked=!0,C.value="_blank",x.type="radio",x.name="alert-read-more-target-"+t,x.value="",L.appendChild(C),L.appendChild(document.createTextNode("New Tab ")),N.appendChild(x),N.appendChild(document.createTextNode("Current Tab")),g.classList="hidden",g.appendChild(f),g.appendChild(E),g.appendChild(b),g.appendChild(L),g.appendChild(N),_.innerHTML="Add Icon ",y.classList="dashicons dashicons-image-rotate resetAlertIcon",y.addEventListener("click",function(e){resetIconSelect(this.parentNode.nextElementSibling,!1)}),_.appendChild(y),w.id="caweb-icon-menu",w.className="noUpdate";for(var S=0;S<args.caweb_icons.length;S++){var A=document.createElement("LI");A.classList="icon-option ca-gov-icon-"+args.caweb_icons[S],A.title=args.caweb_icons[S],w.appendChild(A)}I.name="alert-icon-"+t,I.type="hidden",w.appendChild(I),k.className="button button-primary ok",k.innerHTML="Ok",k.addEventListener("click",function(e){P(this)}),T.className="button button-primary cancel",T.innerHTML="Cancel",T.addEventListener("click",function(e){M(this)}),n.appendChild(a),n.appendChild(i),n.appendChild(d),n.appendChild(s),n.appendChild(o),n.appendChild(u),n.appendChild(p),n.appendChild(g),n.appendChild(_),n.appendChild(w),n.appendChild(k),n.appendChild(T),e.appendChild(n)}(l,a),n.appendChild(i),t.append(n),d.append(l),wp.editor.initialize("alertmessage"+a,args.tinymce_settings),c=!0}),B(".caweb-alert div a.alert-toggle").click(function(e){h(this)}),B(".removeAlert").click(function(e){v(this)}),B(".alert-read-more").click(function(e){O(this)}),B(".resetAlertIcon").click(function(e){resetIconSelect(this.parentNode.nextElementSibling,!1)}),B(".caweb-alert div a.activateAlert").click(function(e){p(this)}),B('[class*="caweb-alert-"] .button-primary.ok').click(function(e){P(this)}),B('[class*="caweb-alert-"] .button-primary.cancel').click(function(e){M(this)});var s=B("#caweb-alert-settings");function P(e){for(var t=e.parentNode.className.substring(e.parentNode.className.lastIndexOf("-")+1),n=e.parentNode.getElementsByTagName("INPUT"),a={},i=0;i<n.length;i++){var d=n[i];if(-1<d.name.indexOf("alert-display-")&&d.checked||-1<d.name.indexOf("alert-read-more-target-")&&d.checked)a[d.name]=d.value;else if(-1==d.name.indexOf("alert-display-")&&-1==d.name.indexOf("alert-read-more-target-")){if(-1<d.name.indexOf("alert-icon-")){var l=d.parentNode.getElementsByClassName("selected");0<l.length?cawebIconSelected(B(l[0])[0],!0):d.value=""}a[d.name]=-1<d.name.indexOf("alert-read-more-")&&-1==d.name.indexOf("alert-read-more-url-")?d.checked:d.value}}s[t]=a,tb_remove()}function M(e){e.parentNode.className.substring(e.parentNode.className.lastIndexOf("-")+1);for(var t=e.parentNode.getElementsByTagName("INPUT"),n=0;n<t.length;n++){var a=t[n];if(-1<a.name.indexOf("alert-display-")&&"home"==a.value||-1<a.name.indexOf("alert-read-more-target-")&&"_blank"==a.value)a.checked=!0;else if(-1<a.name.indexOf("alert-read-more-")&&"checkbox"==a.type)a.checked=!1,a.parentNode.parentNode.nextElementSibling.classList.add("hidden");else if(-1<a.name.indexOf("alert-banner-color-")){var i=B("#ca_site_color_scheme")[0],d=i.options[i.selectedIndex].value;a.value=args.caweb_colors[d].highlight}else if(-1<a.name.indexOf("alert-icon-")){var l=a.parentNode;resetIconSelect(l,!1),""!==a.value&&B(l).find('[title="'+a.value+'"]')[0].classList.add("selected")}}tb_remove()}function i(){var e=this.id.substring(this.id.lastIndexOf("-")+1),t=document.getElementById("menu-item-"+e).className,n=document.getElementById("menu-item-settings-"+e),a=n.getElementsByClassName("unit-size-selector")[0],i=a.options[a.selectedIndex].value,d=n.getElementsByClassName("media_image")[0],l=n.getElementsByClassName("field-description")[0],s=n.getElementsByClassName("mega_menu_images")[0],c=n.getElementsByClassName("icon_selector")[0];-1!=t.indexOf("menu-item-depth-0")?(void 0!==s&&s.classList.add("show"),void 0!==c&&c.classList.add("show"),void 0!==d&&d.classList.remove("show"),void 0!==l&&l.classList.add("hidden-field")):(void 0!==s&&s.classList.remove("show"),void 0!==a&&a.parentNode.classList.add("show"),"unit1"!=i?void 0!==l&&l.classList.remove("hidden-field"):void 0!==l&&l.classList.add("hidden-field"),"unit3"==i?void 0!==d&&d.classList.add("show"):void 0!==d&&d.classList.remove("show"))}B(".resetGoogleIcon").click(function(e){resetIconSelect(this.parentNode.nextElementSibling.firstElementChild,!0)}),B('[name="ca_google_trans_enabled"]').click(function(e){"custom"!==this.value?(this.parentNode.parentNode.parentNode.nextElementSibling.classList.add("hidden"),this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.add("hidden"),this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.add("hidden")):"custom"==this.value&&(this.parentNode.parentNode.parentNode.nextElementSibling.classList.remove("hidden"),this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.remove("hidden"),this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.remove("hidden"))}),B('[name="caweb_options_submit"]').click(function(e){e.preventDefault();var t=B("#caweb-alert-settings").find("INPUT"),n=document.createElement("DIV");if(document.getElementById("header_ca_branding_alt_text").value){this.nextElementSibling.value="on",n.className="hidden";for(var a=0;a<t.length;a++){var i=t[a];((-1<i.name.indexOf("alert-display-")||-1<i.name.indexOf("alert-read-more-target-"))&&i.checked||-1==i.name.indexOf("alert-display-")&&-1==i.name.indexOf("alert-read-more-target-"))&&n.appendChild(t[a])}B("#caweb-options-form").append(n),B("#caweb-options-form").submit()}else alert("Organization Logo-Brand Alt Text can not be blank.")}),B(function(){B(document).on("click",'input[name="save_menu"]',function(n){var a=B('div.media_image.show input[name$="_caweb_nav_media_image_alt_text"]');a.each(function(e){if(""==a[e].value){var t=document.getElementById("edit-menu-item-title-"+a[e].id.substring(0,a[e].id.indexOf("_")));alert(t.value+" Navigation Media Image Alt Text can not be blank."),n.preventDefault()}})}),B(document).on("change","div .unit-size-selector",function(){var e=this.id.substring(this.id.lastIndexOf("-")+1),t=this.value,n=document.getElementById("menu-item-settings-"+e),a=n.getElementsByClassName("media_image")[0],i=n.getElementsByClassName("field-description")[0],d=n.getElementsByClassName("icon_selector")[0];"unit1"!=t?i.classList.remove("hidden-field"):i.classList.add("hidden-field"),"unit3"==t?(a.classList.add("show"),d.classList.remove("show")):(a.classList.remove("show"),d.classList.add("show"))}),B(document).on("click",".icon_selector .caweb-icon-menu li",function(e){this.parentNode.parentNode.firstElementChild.lastElementChild.value=this.title}),B(document).on("DOMSubtreeModified","#menu-to-edit",function(e){for(var t=this.getElementsByClassName("pending"),n=0;n<t.length;n++){var a=t.item(n).id.substring(t.item(n).id.lastIndexOf("-")+1);document.getElementById("edit-"+a).addEventListener("click",i)}}),B(".item-edit").click(i)})}(jQuery);