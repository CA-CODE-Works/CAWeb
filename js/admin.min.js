!function(d){var s,m;d(function(){var e=d(".available-headers");e.imagesLoaded(function(){e.masonry({itemSelector:".default-header",isRTL:!("undefined"==typeof isRtl||!isRtl)})}),d(document).on("click","div .library-link",function(e){var a=d(this);m=this.name,e.preventDefault();var t=a.data("option"),n=a.data("uploader"),u=a.data("icon-check")&&a.attr("data-icon-check");t&&0<t.indexOf(",")&&(t=t.split(",")),(s=wp.media.frames.customHeader=wp.media({title:a.data("choose"),library:{type:t},uploader:n,button:{text:a.data("update"),close:!0}})).on("select",function(){var e=s.state().get("selection").first(),a=e.attributes.url,t=e.attributes.alt,n=e.attributes.filename,i=d('input[name="'+m+'"]'),r=d("#"+m+"_img"),l=d('input[name="'+m+'_filename"]');if(/\d+_media_image/.test(m)){var c=document.getElementById(m.substring(0,m.indexOf("_"))+"_caweb_nav_media_image_alt_text");i.value=a,c.value=t}else if("true"!==u){if(i.value=a,null!==r&&(r.src=a),null!==l&&(l.value=n),/header_ca_branding/.test(m))document.getElementById("header_ca_branding_alt_text").value=t}else{var o={action:"caweb_fav_icon_check",icon_url:a};jQuery.post(ajaxurl,o,function(e){1==e?(d(r).attr("src",a),d(i).val(n)):alert("Invalid Icon Mime Type: "+n)})}}),s.on("open",function(){if(!n){var e=s.el.getElementsByClassName("media-frame-router")[0].getElementsByClassName("media-router")[0].getElementsByClassName("media-menu-item");e[1].click(),e[0].parentNode.removeChild(e[0])}}),s.open()})})}(jQuery),jQuery(document).ready(function(){$("#resetFavIcon").click(function(){var e=args.defaultFavIcon,a=e.substring(e.lastIndexOf("/")+1);$('input[name="ca_fav_ico"]').val(a),$("#ca_fav_ico_img").attr("src",e)})});